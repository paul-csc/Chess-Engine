.PHONY: all debug release clean rebuild

CXX = g++ -std=c++17

SRC = src/main.cpp src/board.cpp src/movegen.cpp src/bitboard.cpp
TARGET = build/chess.exe
DEBUG_TARGET = build/chess_debug.exe

all: debug

release: $(TARGET)

debug: $(DEBUG_TARGET)

# Ensure build directory exists
build:
	mkdir -p build

$(TARGET): $(SRC) | build
	$(CXX) -O2 $(SRC) -o $(TARGET)

$(DEBUG_TARGET): $(SRC) | build
	$(CXX) -g -O0 -Wall -Wextra -Wshadow -Wcast-align -Wlogical-op -Wpedantic $(SRC) -o $(DEBUG_TARGET)

clean:
	del /Q build\chess.exe build\chess_debug.exe 2>nul || true
	
rebuild:
	@$(MAKE) clean
	@$(MAKE) all
	